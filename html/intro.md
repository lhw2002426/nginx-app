# 矽望：是什么，为什么

## 简介

**矽望Syswonder是什么？** 


矽望是一个开源社区，由一群系统软件爱好者自发形成，致力于探索和构建适合特定泛在应用场景的新型态操作系统。

在当前阶段，主要目标是针对实时非实时任务混合运行的边缘计算场景，如医疗设备、车辆控制、工业控制、无人系统等领域，面向非对称多处理器SoC（MCU， CPU， DSP等）新型硬件平台对现有操作系统管理机制带来的挑战，在操作系统架构和实现机制上尝试创新：

- 在架构方面，现有宏内核存在系统复杂性高的问题，微内核存在性能差的问题，我们将借鉴separation kernel、unikernel等设计思想，探索新型态的操作系统架构，尝试新的应用运行和资源管理方式。

- 在实现机制方面，现有操作系统主要采用C语言实现，C语言代码容易存在内存方面的缺陷。我们将用内存安全的Rust语言构建安全、高效、专用的新型态泛在操作系统。

为了实现上述目标，社区将主要聚焦下述项目：

- 一个轻量化的Type 1 hypervisor [hvisor](https://github.com/syswonder/hvisor)，主要遵循[separation kernel](https://en.wikipedia.org/wiki/Separation_kernel)思想，主要功能
  是通过严格分区（zone）保证各个分区在时间和空间上的严格隔离，从而
  可以同时支持各个分区独立互不干扰运行。分区常见的形式是轻量虚拟机。通过
  Type 1 hypervisor的分区隔离，实时RTOS和非实时的Linux或Android虚拟机可
  以正常运行，满足各自的应用需求。separation kernel常见于面向高可靠高安全(safety)应用的操作系统，如[PikeOS](https://www.sysgo.com/fileadmin/user_upload/data/professional_article_download/SYSGO_PA_2019-03_Separation_Kernel_as_a_basis_for_certifiable_applications_and_systems.pdf)。
  目前设计支持三种分区：承担系统管理任务的zone0，一般是简化版的Linux；承
  担高算力计算任务的zoneU，一般是unikernel OS；承担实时计算任务的zoneR，
  一般是面向MCU的RTOS。

- 一个兼容Linux应用的轻量化库操作系统[RuxOS](https://github.com/syswonder/ruxos)，主要遵循[unikernel](https://en.wikipedia.org/wiki/Unikernel)设计思想，考虑到边缘泛在计算场景下，应用通常数目有限且相对固定，因此将操作系统简化设计为只支持单应用，将内核功能封装为库，以系统调用的形式提供给应用，应用直接运行在内核态。这种库型态的操作系统应用性能会有极大提升，安全问题(security)主要交给底层的Type 1 hypervisor解决。库型态的操作系统需要良好的工具支持，以方便用户根据单一应用生成构造可运行的二进制镜像，如[unikraft](https://unikraft.org)。

- 一组用Rust语言实现的操作系统基础构件（component），如文件系统、网络协议栈、内存管理器、消息通信机制等。基于这些构件可实现特定的库操作系统。

- 对Hypervisor等关键系统进行形式化验证。

底层硬件方面，将面向非对称多处理器SoC（MCU， CPU， DSP等）新型硬件平台。前期将基于QEMU，之后将基于物理开发板进行。

![](_media/overview.svg)

## 动因

为什么我们要开展上述研究工作？原因是随着微电子、计算机、人工智能、新一代
通信技术等信息技术的高速发展，人类正在正在进入一个人机物融合万物智能互联
的泛在计算新时代，[人机物三元融合新型计算模式](http://old2022.bulletin.cas.cn/publish_article/2022/1/20220107.htm)开始出现，
信息设备数量将达万亿级（主要是各种物端设备），新型应用不断涌现，这些都对
现有信息基础设施--包括芯片、操作系统、网络、计算平台等--提出了新的挑战和
需求。

北京大学的研究人员将未来适应人机物三元融合新型计算模式需求的新型态操作系统称为[“泛在操作系统”](http://www.bulletin.cas.cn/thesisDetails#10.16418/j.issn.1000-3045.20211117009)，并认为由于泛在计算场景的领域行业特定性、泛在计算资源的广谱多样性和极端特异性，泛在操作系统的领域性和专用性将会比较突出，有必要面向不同的应用模式和场景构建不同的泛在操作系统，因此开展了[面向工业物联网场景的泛在操作系统矽璓](https://xuos.io)的研究工作。

中科院计算所的研究人员从芯片角度，提出面向广阔但多样化和碎片化应用
市场场景，不走通用芯片应用之路，而是探索通过[面向领域的专门芯片进行软硬
件贯通优化以获得竞争优势](http://www.bulletin.cas.cn/thesisDetails#10.16418/j.issn.1000-3045.20211117002)
的设想，并认为AIoT 生态发展路径的未来也许是RISC-V/泛在OS(第5代精简指令集和泛在操作系统联盟)。

清华大学的研究人员认为未来新兴应用领域需要特定的新型专用操作系统，如何让开发新型操作系统像开发应用一样方便高效是一个挑战性问题，开展了基于Rust语言开发各种架构/形态的操作系统内核框架和可重用的内核组件等工作，探索[操作系统内核组件化定制化之路](https://github.com/chyyuu/thoughts/blob/main/tangram-oskits.md)。

在这样的背景下，我们 -- 一些关注系统软件发展的研究人员-- 基于共同的兴趣建立
矽望开源社区，希望面向实时任务与非实时任务混合运行的边缘计算场景，开展新
型态操作系统的探索研究与实验验证。矽望社区是一个纯粹的爱好者社区，并不属
于哪个单位。我们尝试通过这种方式，希望和国内外同样对此感兴趣的研究人员
单纯就技术本身开展合作，共同探索有趣的新技术天地。

## 边缘泛在计算场景

医疗设备、车辆控制、工业控制、无人系统等领域是典型的边缘泛在计算场景，这
些边缘场景的典型特点是高实时高可靠任务与高算力任务混合运行，硬件资源多样
复杂，对操作系统提出了新的挑战。

以车用操作系统为例。车用操作系统分为车控操作系统和车载操作系统。其中，车
控操作系统分为安全车控操作系统和智能驾驶操作系统，安全车控操作系统面向车
辆控制领域，比如动力系统、底盘系统、车身系统等，对实时性和安全性要求极高，
相对成熟；智能驾驶操作系统面向智能驾驶领域，应用于智能驾驶域控制器等，除
了实时性和安全性要求外，还需要高算力支持，智能驾驶操作系统是目前汽车操作
系统领域的竞争焦点。车载操作系统面向信息娱乐和智能座舱，主要应用于车机中
的控制系统，主要竞争者为QNX、Linux和Android，格局相对稳定。

随着汽车功能逐步向网联化、智能化发展，汽车的电子电气架构由传统分布式向集
中式和融合式发展，未来的趋势是通过一台车载中央计算机提供所有的驾驶控制以
及座舱娱乐功能，这对车载中央计算机上的车用操作系统提出了严重挑战，要求其
要同时满足高实时、高安全、高算力、易定制的要求，还要有强大的生态，支持实
现软件定义汽车的愿景。

![](_media/car-ee.svg)

现有的操作系统都难以满足上述需求，无论是Linux或者QNX都存在某些方面的短板，
需要在新型态内核架构、采用新型安全编程语言实现、软硬协同机制、形式化验证
等方面进行新的探索。

